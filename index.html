<!doctype html>
<head>
</head>
<style>
.container {
width:150px;
position: relative;
left:600px;
top:100px;
}
#tbl{
	width: 100%;
}
td{
	border:2px solid black;
}
.pl1,.pl2{
	float: left;
	margin: 5px;
}
</style>
<body>
<div>
	<input type="radio" name="asdf" value="3">3x3</input>
	<input type="radio" name="asdf" value="6">6x6</input>
	<input type="radio" name="asdf" value="9">9x9</input>
<div class="container">
<table id="tbl">
</table>
<div class="pl1"></div>
<div class="pl2"></div>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script>
$( "input" ).on( "click", function() {
  var n=$( "input:checked" ).val(); //getting the board type
  game(n);
});
var pl1;
var pl2;
var tic;
var a;
var winner; //stores the winning combination in a 2D Array..for eg for n=3 it is
				//[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]] 
var p,q,r,s;
var content;
var temp;
var cpu;
function game(n){
r=0;
s=n-1;
pl1=0;
pl2=0;
winner=[];
content="";
cpu=[];
a=[];
$(".pl1").html("Player:<b> 0 </b>");
$(".pl2").html("CPU:<b> 0 </b>");
for(var i=0;i<n;i++){
	temp="<tr>";
	for(var j=0;j<n;j++){
	 var id=i*n+j;
     temp+="<td id="+id+">..</td>";
     a.push("");
	}
	temp+="</tr>";
	content+=temp;
}
$("#tbl").html(content);
//calculating the winning combination
for(var i=0;i<(2*n+2);i++)
{
	var col=[];
	if(i<n)
	p=i*n;
    else if (i>=n&&i<2*n)
    q=i-n;
	for(var j=0;j<n;j++){
        if(i<n){
		col.push(p);
		p=p+1;
	   }
	   else if (i>=n&&i<2*n)
	   {
       col.push(q);
       q=q+n*1;
	   }
	   else{
	   	if(i==2*n)
	   	{
	   	col.push(r);
	   	r=r+n*1+1;
	    }
	   else{
         col.push(s);
         s=s+n*1-1;
	    }
	   }
	}
	winner.push(col);
}
console.log(winner)
$("#tbl td").click(function(){
	if($(this).text()==".."){
	var id=$(this).attr("id");
	tic="X";
	$(this).text(tic);
	cpu.push(id);
	a[id]=tic;
    var z=checkWinner(n);
    if(z=="X")
		{
			pl1++;
            $(".pl1").html("Player:"+"<b>"+pl1+"</b>");
            for(var i=0;i<n*n;i++)
	 	    a[i]="";
         }
         setTimeout(cpu_play(n),1000);
        }
 });
}
function cpu_play(n){
var flag=0;
 		while(1&&cpu.length){
 			if(flag)
 			break;
 	  var id=Math.floor(Math.random() * (n*n));
 	for(var i=0;i<cpu.length ;i++){
 		if(cpu[i]==id){
 			id=Math.floor(Math.random() * (n*n));
 			flag=0;
 			break;
 		}
 	    else
 	    flag=1;
 	}
    }
 	cpu.push(id);
 	tic="O";
 	a[id]=tic;
 	$("#"+id+"").text(tic);
 	var z=checkWinner(n);
 	if(z=="O"){
         	pl2++;
            $(".pl2").html("CPU:"+"<b>"+pl2+"</b>");
            for(var i=0;i<n*n;i++)
	 	    a[i]="";
             }
     }
function checkWinner(n){
for(var i=0;i<winner.length;i++){
	var count=0;
	for(var j=0;j<n;j++)
	{
	if(tic==a[winner[i][j]])
	count++;
    }
    if(count==n){
	 alert(tic+" Wins");
	 $("#tbl td").text("..");
	 for(var i=0;i<n*n;i++)
	 a[i]=[""];
	 cpu=[];
	 return tic;
	}
}
}
</script>
</body>
</html>
